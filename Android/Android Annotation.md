# Android Annotation:snail:

### 1. Annotationì´ë€?

ê°œë°œìê°€ ì•±ì˜ ì½”ë“œë¥¼ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ë…¸ì¶œí•¨. ì£¼ì„ê³¼ ë‹¤ë¥´ê²Œ íŠ¹ì • ì½”ë“œì— ë‹¬ì•„ ì–´ë–¤ ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ê±°ë‚˜ ê¸°ëŠ¥ì„ ì£¼ì…í•  ìˆ˜ ìˆìŒ.

### 2. ì¢…ë¥˜

# âœ¨ Res ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜

ë©”ì„œë“œë‚˜ ì§€ì—­ ë³€ìˆ˜, í•„ë“œ ë°˜í™˜ ê°’ì´ ë¦¬ì†ŒìŠ¤ ì°¸ì¡°ê°€ ë  ê²ƒìœ¼ë¡œ ì˜ˆìƒë¨ì„ ë‚˜íƒ€ëƒ„.

- **@AnimatorRes** : animator ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.animator.fade_in`
- **@AnimRes** : anim ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.anim.fade_in`
- **@AnyRes** : ëª¨ë“  íƒ€ì…ì˜ ë¦¬ì†ŒìŠ¤ ì°¸ì¡° (íŠ¹ì • íƒ€ì…ì„ ì•Œê³  ìˆëŠ” ê²½ìš° êµ¬ì²´ì ì¸ ì£¼ì„ì„ ì‚¬ìš©í•˜ë©´ ë¨)
- **@ArrayRes** : ë°°ì—´ íƒ€ì…ì˜ ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.array.phoneTypes`
- **@AttrRes** : attribute ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.attr.action`
- **@BoolRes** : boolean ë¦¬ì†ŒìŠ¤ ì°¸ì¡°
- **@ColorRes** : color ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `anroid.R.color.white`
- **@DimenRes** : dimen ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.dimen.app_icon_size`
- **@DrawableRes** : drawable ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.attr.alertDialogIcon`
- **@FontRes** : font ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `R.font.myfont`
- **@FractionRes** : í¼ì„¼íŠ¸ ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `R.fraction.pivot_x`
- **@IdRes** : id ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `R.id.button`
- **@IntegerRes** : integer ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.integer.config_shortAnimTime`
- **@InterpolatorRes** : interpolator ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.interpolator.cycle`
- **@LayoutRes** : layout ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.layout.list_content`
- **@MenuRes** : menu ë¦¬ì†ŒìŠ¤ ì°¸ì¡°
- **@NavigationRes** : navigation ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `R.navigation.flow`
- **@PluralsRes** : plurals(ê°œìˆ˜ì— ë”°ë¥¸ ë¬¸ìì—´ í‘œí˜„)ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `getQuantityString` ë©”ì„œë“œ ì²˜ëŸ¼ ì•„ì´í…œì˜ ê°¯ìˆ˜ì— ë”°ë¥¸ ê°ê° ë‹¤ë¥¸ ë¬¸ìì—´ì„ í‘œí˜„í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” resource íƒ€ì…ì…ë‹ˆë‹¤. [ì°¸ê³ ](https://medium.com/@info.anikdey003/android-quantity-strings-plurals-5ed3d7c62c16)
- **@RawRes** : raw(ì›ë³¸ ë¦¬ì†ŒìŠ¤ë“¤: txt, ìŒì•… íŒŒì¼ ë“±) ë¦¬ì†ŒìŠ¤ ì°¸ì¡°
- **@StringRes** : string ë¦¬ì†ŒìŠ¤ ì°¸ì¡°
- **@StyleableRes** : styleable ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€”`android.R.styleable.TextView_text`
- **@StyleRes** : style ë¦¬ì†ŒìŠ¤ ì°¸ì¡° â€” `android.R.style.TextAppearance`
- **@TransitionRes** : transition(ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼) ë¦¬ì†ŒìŠ¤ ì°¸ì¡°
- **@XmlRes** : XML ë¦¬ì†ŒìŠ¤ ì°¸ì¡°

# ğŸš€ Thread ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜

ë©”ì†Œë“œì— í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ ê²½ìš° í•´ë‹¹ ìŠ¤ë ˆë“œì—ì„œ í˜¸ì¶œë  ìˆ˜ ìˆìŒì„ ë‚˜íƒ€ë‚´ë©° í´ë˜ìŠ¤ì— ë¶™ì€ ê²½ìš° í´ë˜ìŠ¤ì˜ ëª¨ë“  ë©”ì†Œë“œëŠ” í•´ë‹¹ ìŠ¤ë ˆë“œì—ì„œ í˜¸ì¶œ ë  ìˆ˜ ìˆìŒ.

- **@AnyThread** : ëª¨ë“  ìŠ¤ë ˆë“œì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- **@BindThread** : [ë°”ì¸ë”](https://developer.android.com/guide/components/aidl) ìŠ¤ë ˆë“œì—ì„œë§Œ í˜¸ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì„œë¹„ìŠ¤ì˜ ë³„ë„ ìŠ¤ë ˆë“œ)
- **@MainThread(@UiThread)** : ë©”ì¸(UI) ìŠ¤ë ˆë“œì—ì„œë§Œ í˜¸ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- **@WorkerThread** : worker(ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ê°™ì€ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…) ìŠ¤ë ˆë“œì—ì„œë§Œ í˜¸ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

# ğŸ›  ê·¸ ë°–ì˜ ìœ ìš©í•œ ì–´ë…¸í…Œì´ì…˜

- **@CallSuper** : ì´ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ ë©”ì„œë“œë¥¼ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ì˜¤ë²„ë¼ì´ë“œ í•  ë• ë°˜ë“œì‹œ ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë„ë¡ ê°•ì œí•¨ì„ ë‚˜íƒ€ëƒ„.

ex ) ì•¡í‹°ë¹„í‹°ì˜ ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ

- **@CheckResult** : í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ ë©”ì„œë“œê°€ ë¦¬í„´í•œ ê²°ê³¼ê°’ì„ ê°œë°œìê°€ ë”°ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë¬´ì‹œí–ˆì„ ë•Œ ì˜¤ë¥˜ë¥¼ ë±‰ì–´ëƒ…ë‹ˆë‹¤.

```
@CheckResult
fun trim(s: String) = s.trim()...
s.trim() // ê²°ê³¼ê°’ì„ ë”°ë¡œ ì„¸íŒ…í•˜ì§€ ì•Šì•„ì£¼ì—ˆìœ¼ë¯€ë¡œ ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ
val str = s.trim() // ok
```

- **@CheckSdkIntAtLeast** : í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ì¶”ê°€ëœ ë©”ì„œë“œê°€ SDK_INT API ë ˆë²¨ì´ ìµœì†Œ ì£¼ì–´ì§„ ê°’ì¸ì§€ ê²€ì‚¬í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ ì§€ì •ëœ ëŒë‹¤ì‹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

```
@ChecksSdkIntAtLeast(api = Build.VERSION_CODES.O)
fun isAtLeastO() = Build.VERSION.SDK_INT >= 26// ì–´ë…¸í…Œì´ì…˜ì˜ ì¸ìë¡œ ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ” ì†ì„±ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
// api: Int -> ìµœì†Œ API
// codename: String -> ìµœì†Œ APIì˜ ì½”ë“œëª…("R")
// lambda: Int -> ìµœì†Œ API ë ˆë²¨ì„ ë§Œì¡±í•  ê²½ìš° ì‹¤í–‰ë  ëŒë‹¤ì˜ íŒŒë¼ë¯¸í„° ë²ˆí˜¸
// parameter: Int -> ìµœì†Œ API ë ˆë²¨ì´ íŒŒë¼ë¯¸í„°ì— ì§€ì •ë˜ë©° ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„° ë²ˆí˜¸ëŠ” 0ë¶€í„° ì‹œì‘ì…ë‹ˆë‹¤.@ChecksSdkIntAtLeast(parameter = 0, lambda = 1)
inline fun fromApi(value: Int, action: () -> Unit) {
  if (Build.VERSION.SDK_INT >= value) {
    action()
  }
}
// 0ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ìµœì†Œ API ë ˆë²¨ì„ ì£¼ì—ˆìœ¼ë©° 1ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ì‹¤í–‰ë  ëŒë‹¤ì‹ì„ ë„£ì–´ì¤Œì„ // ëœ»í•©ë‹ˆë‹¤.// Kotlin í”„ë¡œí¼í‹°ì—ë„ ì‚¬ìš© ê°€ëŠ¥
@get:ChecksSdkIntAtLeast(api = Build.VERSION_CODES.GINGERBREAD)
val isGingerbread: Boolean
  get() = Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD
```

- **@ContentView** : ìƒì„±ìì— ì—°ê²°í•  ìˆ˜ ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë©° `LayoutRes`ë¥¼ ìƒì„±ìì˜ ì¸ìë¡œ ë°›ìœ¼ë©´ `setContentView`ë¥¼ ëŒ€ì²´í•´ì¤ë‹ˆë‹¤.

```
class MainFragment: Fragment {
  fun MainFragment() {
    // ì•„ë˜ ìƒì„±ìëŠ” @ContentView ì–´ë…¸í…Œì´ì…˜ì´ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
    super(R.layout.main)
  }
}// Fragment ë‚´ë¶€ ì½”ë“œ
@ContentView
public Fragment(@LayoutRes int contentLayoutId) {
    this();
    mContentLayoutId = contentLayoutId;
}
```

- **@DoNotInline** : ì½”ë“œê°€ ë¹Œë“œ ì‹œ ìµœì í™” í•  ë•Œ ì–´ë…¸í…Œì´ì…˜ì´ ì—°ê²°ëœ ë©”ì†Œë“œëŠ” ì¸ë¼ì¸ìœ¼ë¡œ ë³€ê²½ë˜ì§€ ì•Šì•„ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë³„ë„ì˜ í´ë˜ìŠ¤ì— í¬í•¨ë˜ë„ë¡ ì˜ë„ì ìœ¼ë¡œ ë¼ì¸ ì™¸ë¶€ ë©”ì„œë“œì˜ ì¸ë¼ì¸ì„ ë°©ì§€í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
- **@GuardedBy** : í•´ë‹¹ í•„ë“œë‚˜ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë½ì„ ë³´ìœ í•´ì•¼ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

```
private val anyLock = Any()

@GuardedBy("anyLock") // anyLock ê°ì²´ë¥¼ ë³´ìœ í•´ì•¼ í•„ë“œ ì ‘ê·¼ ê°€ëŠ¥
@Volatile
private var lockObject : Any? = null

fun getLock(): Any? {
    synchronized(anyLock) {
        if (lockObject == null) {
            lockObject = Any()
        }
    }
    return lockObject
}
```

- **@Keep** : ë¹Œë“œ ì‹œ ì½”ë“œê°€ ìµœì í™” ë  ë•Œ ì–´ë…¸í…Œì´ì…˜ì´ ì—°ê²°ëœ ìš”ì†Œë¥¼ ì œê±°í•˜ì§€ ì•Šì•„ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- **@OptIn** : ì–´ë…¸í…Œì´ì…˜ì´ ì—°ê²°ëœ íŒŒì¼, ì„ ì–¸, ì‹ì—ì„œ [opt-in](https://kotlinlang.org/docs/opt-in-requirements.html) APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **@RequiresOptIn** : í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ì—°ê²°ëœ ìš”ì†Œê°€ OptIn APIì˜ ë§ˆì»¤ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë¶ˆì•ˆì •í•˜ê±°ë‚˜ ë¹„í‘œì¤€ APIì˜ ì¼ë¶€ë¡œ ê°„ì£¼ë˜ë©° í•´ë‹¹ ìš”ì†Œë¥¼ í˜¸ì¶œí•˜ë ¤ë©´ OptInì„ ì‚¬ìš©í•˜ê±°ë‚˜ **@OptIn** ì–´ë…¸í…Œì´ì…˜ì„ ë‹¬ì•„ì•¼í•©ë‹ˆë‹¤.
- **@RequiresApi** : í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì€ **@TargetApi** ì™€ ìœ ì‚¬í•˜ê²Œ ì§€ì •ëœ API ë ˆë²¨ ì´ìƒì—ì„œë§Œ í˜¸ì¶œë˜ì–´ì•¼ í•¨ì„ ì˜ë¯¸í•˜ì§€ë§Œ í•´ë‹¹ ë©”ì†Œë“œì— ëŒ€í•œ í˜¸ì¶œìì˜ ìš”êµ¬ ì‚¬í•­ì„ì„ ë”ìš± ëª…í™•í•˜ê²Œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- **@RequirePermission** : í•˜ë‚˜ ì´ìƒì˜ ê¶Œí•œì´ í•„ìš”í•˜ê±°ë‚˜ í•„ìš”í•  ìˆ˜ ìˆìŒì„ ë‚˜íƒ€ë‚´ëŠ” ì–´ë…¸í…Œì´ì…˜ ì…ë‹ˆë‹¤.

```
// ë‹¨ì¼ ê¶Œí•œì´ í•„ìš”í•œ ì˜ˆ
@RequiresPermission(ACCESS_COARSE_LOCATION)
abstract fun getLastKnownLocation(String provider): Location// í•˜ë‚˜ ì´ìƒì˜ ê¶Œí•œì„ ìš”êµ¬í•˜ëŠ” ì˜ˆ
@RequiresPermission(
  anyOf = { ACCESS_COARSE_LOCATION, ACCESS_FINE_LOCATION }
)
abstract fun getLastKnownLocation(String provider): Location// ì—¬ëŸ¬ ê¶Œí•œì´ í•„ìš”í•œ ì˜ˆ
@RequiresPermission(
  allOf = {ACCESS_COARSE_LOCATION, ACCESS_FINE_LOCATION}
)
abstract fun getLastKnownLocation(String provider): Location// Content Providerì— ëŒ€í•´ ë³„ë„ì˜ ì½ê¸° ë° ì“°ê¸° ê¶Œí•œì„ ìš”êµ¬í•˜ëŠ” ì˜ˆ
@RequiresPermission.Read(
  @RequiresPermission(READ_HISTORY_BOOKMARKS)
)    @RequiresPermission.Write(
  @RequiresPermission(WRITE_HISTORY_BOOKMARKS)
)
const val BOOKMARKS_URI = Uri.parse("content://browser/bookmarks")// ë§¤ê°œ ë³€ìˆ˜ì— ì§€ì •ëœ ê²½ìš° ì–´ë…¸í…Œì´ì…˜ì€ ë©”ì†Œë“œì— ë§¤ê°œ ë³€ìˆ˜ ê°’ì— ë”°ë¥¸ ê¶Œí•œì´ í•„ìš”í•¨ì„ 
// ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
fun startActivity(@RequiresPermission intent: Intent) { ... }
```

- **@RestrictTo** : í•´ë‹¹ ìš”ì†ŒëŠ” íŠ¹ì • ë²”ìœ„ ë‚´ì—ì„œë§Œ ì•¡ì„¸ìŠ¤í•´ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤([**Scope**](https://developer.android.com/reference/kotlin/androidx/annotation/RestrictTo.Scope))

```
// ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‚´ ì‚¬ìš© ì œí•œ ì˜ˆ(Group Id)
@RestrictTo(GROUP_ID)
fun resetPaddingToInitialValues() { ... }// í…ŒìŠ¤íŠ¸ì—ì„œë§Œ ì‚¬ìš© ì œí•œ ì˜ˆ
@RestrictScope(TESTS)
abstract fun getUserId(): Int// ì„œë¸Œ í´ë˜ì‹œì—ì„œë§Œ ì‚¬ìš©ì„ ì œí•œí•˜ëŠ” ì˜ˆ
@RestrictScope(SUBCLASSES)
fun onDrawForeground(canvas: Canvas) { ... }
```

- **@VisibleForTesting** : ì„ íƒì ìœ¼ë¡œ ê°€ì‹œì„±ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ í…ŒìŠ¤íŒ… ìš©ìœ¼ë¡œë§Œ ê³µê°œë  ìˆ˜ ìˆê²Œ ì§€ì •ë©ë‹ˆë‹¤.

```
@VisibleForTesting(otherwise = VisibleForTesting.PROTECTED)
fun printDiagnostics(): String { ... }// NONE -> ì¸ìê°€ ì—†ì„ ì‹œ ê¸°ë³¸ ì§€ì •. í•´ë‹¹ ìš”ì†ŒëŠ” í…ŒìŠ¤íŠ¸ì—ì„œë§Œ í˜¸ì¶œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
// PACKAGE_PRIVATE -> íŒ¨í‚¤ì§€ ë¹„ê³µê°œ ê°€ì‹œì„±ì„ ê°–ìŠµë‹ˆë‹¤.
// PRIVATE 
// PROTECTED
```

- **@ColorInt** : íŒ¨í‚¹ëœ ìƒ‰ìƒ intë¥¼ ë‚˜íƒ€ëƒ„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
- **@Dimension** : ë³€ìˆ˜, í•„ë“œ ë˜ëŠ” ë©”ì†Œë“œì˜ ë°˜í™˜ ê°’ì´ dimensionì„ ë‚˜íƒ€ë‚¼ ê²ƒìœ¼ë¡œ ì˜ˆìƒë¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. `unit` ì¸ìˆ˜ë¡œ **DP(0)**, **PX(1)**, **SP(2)**ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **@Px** : ë³€ìˆ˜, í•„ë“œ ë˜ëŠ” ë©”ì†Œë“œì˜ ë°˜í™˜ ê°’ì´ pixel dimensionì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- **@FloatRange**, **@IntRange** : ê°ê° ì£¼ì–´ì§„ ë²”ìœ„ì—ì„œ float ë˜ëŠ” double, intì´ì–´ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

```
@FloatRange(from=0.0, to=1.0)
fun getAlpha(): Float { ... }
```

- **@Size** : ì–´ë…¸í…Œì´ì…˜ì´ ì—°ê²°ëœ ìš”ì†Œê°€ ì£¼ì–´ì§„ í¬ê¸° ë˜ëŠ” ê¸¸ì´ë¥¼ ê°€ì ¸ì•¼ í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. -1ì€ ì„¤ì •ë˜ì§€ ì•ŠìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

```
fun getLocationInWindow(@Size(2) location: IntArray) { ... }Size(value: Long, min: Long, max: Long, multiple: Long)
// value -> ì •í™•í•œ í¬ê¸° ì§€ì •
// min -> ìµœì†Œ í¬ê¸°
// max -> ìµœëŒ€ í¬ê¸°
// multiple -> í•´ë‹¹ ì¸ìì˜ ë°°ìˆ˜ í¬ê¸°
```

### 3. ì°¸ê³ ìë£Œ

https://developer.android.com/studio/build/migrate-to-kts?hl=ko

https://techblog.woowahan.com/2625/

https://aroundck.tistory.com/7150